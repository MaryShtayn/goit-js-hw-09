{"mappings":"qhBAWA,IAAAA,EAAAC,EAAA,SAsDA,SAASC,EAAcC,EAAUC,GAC/B,OAAO,IAAIC,SAAQ,CAACC,EAASC,KACLC,KAAKC,SAAW,GAEpCH,EAAQ,C,SAAEH,E,MAAUC,IAEpBG,EAAO,C,SAAEJ,E,MAAUC,GAAQ,G,CAzDpBM,SAASC,cAAc,SAE/BC,iBAAiB,UAEtB,SAAsBC,GACpBA,EAAEC,iBAEF,MAAQV,MAAAW,EAAKC,KAAEA,EAAIC,OAAEA,GAAWJ,EAAEK,cAAcC,SAEhDC,YAAW,KACT,IAAIC,EAAW,EAUf,GARAnB,EAAcmB,EAAUN,EAAMO,OAC3BC,MAAK,EAACpB,SAAEA,EAAQC,MAAEA,MACjBoB,EAAAxB,GAASyB,OAAOC,QAAQ,qBAAqBvB,QAAeC,MAAU,IAEvEuB,OAAM,EAACxB,SAAEA,EAAQC,MAAEA,MAClBoB,EAAAxB,GAASyB,OAAOG,QAAQ,oBAAoBzB,QAAeC,MAAU,IAG5C,IAAzByB,OAAOZ,EAAOK,OAChB,OAGF,MAAMQ,EAAKC,aAAY,KACrBV,GAAY,EAEZnB,EAAcmB,EAAUN,EAAMO,OAC3BC,MAAK,EAACpB,SAAEA,EAAQC,MAAEA,MACjBoB,EAAAxB,GAASyB,OAAOC,QACd,qBAAqBvB,QACnB0B,OAAOzB,GAASyB,OAAOb,EAAKM,QAAUnB,EAAW,OAEpD,IAEFwB,OAAM,EAACxB,SAAEA,EAAQC,MAAEA,MAClBoB,EAAAxB,GAASyB,OAAOG,QACd,oBAAoBzB,QAClB0B,OAAOzB,GAASyB,OAAOb,EAAKM,QAAUnB,EAAW,OAEpD,IAEF6B,SAAQ,KACHX,IAAaQ,OAAOZ,EAAOK,QAC7BW,cAAcH,EAAG,GAEnB,GACHd,EAAKM,MAAM,GACbP,EAAMO,M","sources":["src/js/03-promises.js"],"sourcesContent":["// Write a script that, when submitting the form, calls the createPromise(position, delay)\n// function as many times as you entered in the amount field.On each call, pass it the number of the promise\n// to be created(position) and the delay given the first delay(delay) and step(step) entered by the user.\n// Supplement the code of the createPromise function so that it returns one promise that will be fulfilled or rejected\n// after delay time.The value of the promise must be an object containing the position and delay properties with the values\n// of these parameters.\n// Use the initial function code to choose whether to fulfill or reject the promise.\n\n// Достучаться до инпутов формы\n// Поставить прослушиватель на кнопку сабмит с колбеком онСабмит\n// Привязать эмоунт (количество) к количеству раз, вызова функции setInterval\nimport Notiflix from 'notiflix';\nimport 'notiflix/dist/notiflix-3.2.6.min.css';\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  const { delay, step, amount } = e.currentTarget.elements;\n\n  setTimeout(() => {\n    let position = 1;\n\n    createPromise(position, delay.value)\n      .then(({ position, delay }) => {\n        Notiflix.Notify.success(`Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        Notiflix.Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n      });\n\n    if (Number(amount.value) === 1) {\n      return;\n    }\n\n    const id = setInterval(() => {\n      position += 1;\n\n      createPromise(position, delay.value)\n        .then(({ position, delay }) => {\n          Notiflix.Notify.success(\n            `Fulfilled promise ${position} in ${\n              Number(delay) + Number(step.value) * (position - 1)\n            }ms`\n          );\n        })\n        .catch(({ position, delay }) => {\n          Notiflix.Notify.failure(\n            `Rejected promise ${position} in ${\n              Number(delay) + Number(step.value) * (position - 1)\n            }ms`\n          );\n        })\n        .finally(() => {\n          if (position === Number(amount.value)) {\n            clearInterval(id);\n          }\n        });\n    }, step.value);\n  }, delay.value);\n}\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    if (shouldResolve) {\n      resolve({ position, delay });\n    } else {\n      reject({ position, delay });\n    }\n  });\n}\n"],"names":["$7Y9D8","parcelRequire","$47d4ff9957288465$var$createPromise","position","delay","Promise","resolve","reject","Math","random","document","querySelector","addEventListener","e","preventDefault","delay1","step","amount","currentTarget","elements","setTimeout","position1","value","then","$parcel$interopDefault","Notify","success","catch","failure","Number","id","setInterval","finally","clearInterval"],"version":3,"file":"03-promises.612254b5.js.map"}